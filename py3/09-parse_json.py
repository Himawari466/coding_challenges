#!/usr/bin/env python
# Soal latihan parse JSON sederhana
# API JSON:
# https://api.kawalcorona.com/indonesia/provinsi/
#
# Data example:
# [{"attributes":{"FID":11,"Kode_Provi":31,"Provinsi":"DKI Jakarta","Kasus_Posi":115174,"Kasus_Semb":106100,"Kasus_Meni":2412}},{"attributes":{"FID":15,"Kode_Provi":35,"Provinsi":"Jawa Timur","Kasus_Posi":55575,"Kasus_Semb":49542,"Kasus_Meni":3970}},{"attributes":{"FID":12,"Kode_Provi":32,"Provinsi":"Jawa Barat","Kasus_Posi":42572,"Kasus_Semb":32049,"Kasus_Meni":795}},{"attributes":{"FID":13,"Kode_Provi":33,"Provinsi":"Jawa Tengah","Kasus_Posi":39788,"Kasus_Semb":31937,"Kasus_Meni":1918}},{"attributes":{"FID":27,"Kode_Provi":73,"Provinsi":"Sulawesi Selatan","Kasus_Posi":19060,"Kasus_Semb":17092,"Kasus_Meni":472}},{"attributes":{"FID":3,"Kode_Provi":13,"Provinsi":"Sumatera Barat","Kasus_Posi":16709,"Kasus_Semb":13386,"Kasus_Meni":311}},{"attributes":{"FID":23,"Kode_Provi":64,"Provinsi":"Kalimantan Timur","Kasus_Posi":16384,"Kasus_Semb":13593,"Kasus_Meni":518}},{"attributes":{"FID":4,"Kode_Provi":14,"Provinsi":"Riau","Kasus_Posi":14841,"Kasus_Semb":11490,"Kasus_Meni":340}},{"attributes":{"FID":2,"Kode_Provi":12,"Provinsi":"Sumatera Utara","Kasus_Posi":14051,"Kasus_Semb":11509,"Kasus_Meni":572}},{"attributes":{"FID":17,"Kode_Provi":51,"Provinsi":"Bali","Kasus_Posi":12519,"Kasus_Semb":11461,"Kasus_Meni":403}},{"attributes":{"FID":22,"Kode_Provi":63,"Provinsi":"Kalimantan Selatan","Kasus_Posi":12365,"Kasus_Semb":11205,"Kasus_Meni":499}},{"attributes":{"FID":16,"Kode_Provi":36,"Provinsi":"Banten","Kasus_Posi":10554,"Kasus_Semb":8141,"Kasus_Meni":298}},{"attributes":{"FID":33,"Kode_Provi":94,"Provinsi":"Papua","Kasus_Posi":9037,"Kasus_Semb":4637,"Kasus_Meni":129}},{"attributes":{"FID":6,"Kode_Provi":16,"Provinsi":"Sumatera Selatan","Kasus_Posi":8534,"Kasus_Semb":6954,"Kasus_Meni":461}},{"attributes":{"FID":1,"Kode_Provi":11,"Provinsi":"Aceh","Kasus_Posi":7797,"Kasus_Semb":6258,"Kasus_Meni":282}},{"attributes":{"FID":25,"Kode_Provi":71,"Provinsi":"Sulawesi Utara","Kasus_Posi":5827,"Kasus_Semb":4861,"Kasus_Meni":216}},{"attributes":{"FID":28,"Kode_Provi":74,"Provinsi":"Sulawesi Tenggara","Kasus_Posi":5529,"Kasus_Semb":4390,"Kasus_Meni":88}},{"attributes":{"FID":21,"Kode_Provi":62,"Provinsi":"Kalimantan Tengah","Kasus_Posi":4801,"Kasus_Semb":4085,"Kasus_Meni":165}},{"attributes":{"FID":10,"Kode_Provi":21,"Provinsi":"Kepulauan Riau","Kasus_Posi":4640,"Kasus_Semb":3074,"Kasus_Meni":116}},{"attributes":{"FID":14,"Kode_Provi":34,"Provinsi":"Daerah Istimewa Yogyakarta","Kasus_Posi":4399,"Kasus_Semb":3568,"Kasus_Meni":108}},{"attributes":{"FID":18,"Kode_Provi":52,"Provinsi":"Nusa Tenggara Barat","Kasus_Posi":4314,"Kasus_Semb":3540,"Kasus_Meni":229}},{"attributes":{"FID":34,"Kode_Provi":91,"Provinsi":"Papua Barat","Kasus_Posi":4189,"Kasus_Semb":3655,"Kasus_Meni":66}},{"attributes":{"FID":31,"Kode_Provi":81,"Provinsi":"Maluku","Kasus_Posi":3863,"Kasus_Semb":3266,"Kasus_Meni":47}},{"attributes":{"FID":29,"Kode_Provi":75,"Provinsi":"Gorontalo","Kasus_Posi":3021,"Kasus_Semb":2859,"Kasus_Meni":85}},{"attributes":{"FID":32,"Kode_Provi":82,"Provinsi":"Maluku Utara","Kasus_Posi":2232,"Kasus_Semb":1946,"Kasus_Meni":75}},{"attributes":{"FID":20,"Kode_Provi":61,"Provinsi":"Kalimantan Barat","Kasus_Posi":2035,"Kasus_Semb":1470,"Kasus_Meni":22}},{"attributes":{"FID":9,"Kode_Provi":18,"Provinsi":"Lampung","Kasus_Posi":1884,"Kasus_Semb":1120,"Kasus_Meni":78}},{"attributes":{"FID":5,"Kode_Provi":15,"Provinsi":"Jambi","Kasus_Posi":1399,"Kasus_Semb":892,"Kasus_Meni":27}},{"attributes":{"FID":7,"Kode_Provi":17,"Provinsi":"Bengkulu","Kasus_Posi":1294,"Kasus_Semb":992,"Kasus_Meni":59}},{"attributes":{"FID":26,"Kode_Provi":72,"Provinsi":"Sulawesi Tengah","Kasus_Posi":1126,"Kasus_Semb":835,"Kasus_Meni":36}},{"attributes":{"FID":30,"Kode_Provi":76,"Provinsi":"Sulawesi Barat","Kasus_Posi":1036,"Kasus_Semb":841,"Kasus_Meni":14}},{"attributes":{"FID":24,"Kode_Provi":65,"Provinsi":"Kalimantan Utara","Kasus_Posi":928,"Kasus_Semb":802,"Kasus_Meni":11}},{"attributes":{"FID":8,"Kode_Provi":19,"Provinsi":"Kepulauan Bangka Belitung","Kasus_Posi":777,"Kasus_Semb":589,"Kasus_Meni":10}},{"attributes":{"FID":19,"Kode_Provi":53,"Provinsi":"Nusa Tenggara Timur","Kasus_Posi":694,"Kasus_Semb":500,"Kasus_Meni":7}}]
#
# $ python 09-parse_json.py | less

import simplejson as json
from urllib.request import Request, urlopen

req = Request('https://api.kawalcorona.com/indonesia/provinsi/', headers={'User-Agent': 'Mozilla/5.0'}) # spider bot fix, must set UA
data = urlopen(req).read() # get JSON data

jdata = json.loads(data.decode('utf-8'))
for x in jdata: # parse JSON
  print(x['attributes']['Provinsi'])
  print(f"Positif:\t{x['attributes']['Kasus_Posi']:,}")
  print(f"Sembuh:\t\t{x['attributes']['Kasus_Semb']:,}")
  print(f"Meninggal:\t{x['attributes']['Kasus_Meni']:,}")
  print("-----\n")
